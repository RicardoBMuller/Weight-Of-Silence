<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Weight of Silence - Dead Creator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- PALETA BASEADA NA ARTE DO ÁLBUM --- */
        :root {
            --bg-color: #050505;
            --card-glass: rgba(15, 12, 10, 0.97);
            --item-hover: #1a1612;
            --text-primary: #d4cdc3;
            --text-secondary: #7a6e61;
            --accent-color: #9c4a1a; /* Tom de ferrugem/sangue seco da capa */
            --accent-hover: #c9652d;
            --border-style: 1px solid rgba(156, 74, 26, 0.15);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Times New Roman', serif; /* Fonte mais clássica/dark */
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            background-image: radial-gradient(circle at 50% 40%, #1a140f 0%, #050505 80%);
        }

        .main-wrapper {
            display: flex;
            flex-direction: row;
            width: 90%;
            max-width: 950px;
            height: 620px;
            background-color: var(--card-glass);
            border-radius: 4px; /* Cantos mais secos para o estilo Doom */
            box-shadow: 0 40px 100px rgba(0,0,0,0.9);
            overflow: hidden;
            backdrop-filter: blur(20px);
            border: var(--border-style);
        }

        /* Barra Lateral */
        .playlist-sidebar {
            flex: 1;
            background-color: rgba(0,0,0,0.4);
            padding: 35px;
            display: flex;
            flex-direction: column;
            border-right: var(--border-style);
        }

        .playlist-header {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 30px;
            color: var(--accent-color);
            text-transform: uppercase;
            letter-spacing: 3px;
            border-bottom: 1px solid rgba(156, 74, 26, 0.3);
            padding-bottom: 10px;
        }

        .playlist-items {
            list-style: none; padding: 0; margin: 0; overflow-y: auto; flex-grow: 1;
        }
        .playlist-items::-webkit-scrollbar { width: 3px; }
        .playlist-items::-webkit-scrollbar-thumb { background-color: var(--accent-color); }

        .playlist-item {
            display: flex; align-items: center; padding: 18px 12px; cursor: pointer; transition: 0.4s; border-bottom: 1px solid rgba(255,255,255,0.02);
        }
        .playlist-item:hover { background-color: var(--item-hover); color: #fff; }
        .playlist-item.active-song { background-color: rgba(156, 74, 26, 0.08); border-left: 3px solid var(--accent-color); }
        
        .item-info { display: flex; flex-direction: column; }
        .item-title { font-size: 1rem; letter-spacing: 0.5px; }
        .item-artist { font-size: 0.75rem; color: var(--text-secondary); margin-top: 5px; text-transform: uppercase; }

        /* Player */
        .player-container {
            width: 420px; padding: 45px; display: flex; flex-direction: column; justify-content: center; position: relative;
        }

        .cover-area {
            width: 100%; aspect-ratio: 1; border-radius: 2px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.8); margin-bottom: 35px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .cover-area img { width: 100%; height: 100%; object-fit: cover; filter: sepia(30%) contrast(110%) brightness(80%); }

        .song-info-player { text-align: center; margin-bottom: 30px; }
        .song-title-main { font-size: 1.6rem; font-weight: 500; margin: 0; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .band-name { color: var(--accent-color); font-size: 0.9rem; text-transform: uppercase; margin-top: 10px; letter-spacing: 2px; }

        .progress-area { height: 3px; width: 100%; background: #1a1a1a; cursor: pointer; margin-bottom: 10px; }
        .progress-bar { height: 100%; width: 0%; background: var(--accent-color); position: relative; }

        .timers { display: flex; justify-content: space-between; font-size: 0.7rem; color: var(--text-secondary); margin-bottom: 30px; font-family: monospace; }
        
        .controls { display: flex; justify-content: space-between; align-items: center; }
        .btn { background: none; border: none; color: var(--text-secondary); font-size: 1.3rem; cursor: pointer; transition: 0.3s; }
        .btn:hover { color: var(--accent-color); }
        .btn-main { width: 65px; height: 65px; background-color: #d4cdc3; color: #000; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.6rem; box-shadow: 0 0 20px rgba(156, 74, 26, 0.2); }
        .btn-main:hover { background-color: var(--accent-hover); transform: scale(1.05); }

        /* Letras */
        .lyrics-popup {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(5, 5, 5, 0.98); z-index: 10; display: flex; flex-direction: column;
            justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: 0.5s; padding: 40px;
        }
        .lyrics-popup.show { opacity: 1; pointer-events: auto; }
        .lyrics-content { font-size: 1.05rem; line-height: 1.9; color: #999; overflow-y: auto; white-space: pre-wrap; width: 100%; font-style: italic; }
        .close-lyrics { margin-top: 30px; background: none; border: 1px solid var(--text-secondary); color: var(--text-secondary); padding: 10px 30px; cursor: pointer; text-transform: uppercase; font-size: 0.8rem; }

        @media (max-width: 850px) {
            .main-wrapper { flex-direction: column; height: auto; }
            .player-container { width: 100%; box-sizing: border-box; }
            .playlist-sidebar { height: 400px; }
        }
    </style>
</head>
<body>

<div class="main-wrapper">
    <div class="playlist-sidebar">
        <div class="playlist-header">Dead Creator — Tracklist</div>
        <ul class="playlist-items" id="playlist-ul"></ul>
    </div>

    <div class="player-container">
        <div class="lyrics-popup" id="lyrics-popup">
            <div class="lyrics-content" id="lyrics-text"></div>
            <button class="close-lyrics" id="close-lyrics">Fechar</button>
        </div>

        <div class="cover-area"><img src="musicas/album_cover.jpg" alt="Dead Creator" id="cover"></div>

        <div class="song-info-player">
            <h2 class="song-title-main" id="title">Carregando...</h2>
            <p class="band-name">Weight of Silence</p>
        </div>

        <div class="progress-area" id="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="timers">
            <span id="current-time">0:00</span>
            <span id="duration">0:00</span>
        </div>

        <div class="controls">
            <button class="btn" id="lyrics-btn" title="Letra"><i class="fas fa-file-invoice"></i></button>
            <button class="btn" id="prev"><i class="fas fa-backward"></i></button>
            <button class="btn btn-main" id="play"><i class="fas fa-play"></i></button>
            <button class="btn" id="next"><i class="fas fa-forward"></i></button>
            <button class="btn" id="shuffle" title="Shuffle"><i class="fas fa-shuffle"></i></button>
        </div>
    </div>
</div>

<audio id="audio"></audio>

<script>
    // Lista corrigida conforme a imagem da sua pasta
    const songs = [
        { "title": "Tears of a Dead Creator", "artist": "Weight of Silence", "src": "musicas/Tears of a Dead Creator.mp3", "lrc": "musicas/Tears of a Dead Creator.txt" },
        { "title": "Silence", "artist": "Weight of Silence", "src": "musicas/Silence.mp3", "lrc": "musicas/Silence.txt" },
        { "title": "The Altar of Ashes", "artist": "Weight of Silence", "src": "musicas/The Altar of Ashes.mp3", "lrc": "musicas/The Altar of Ashes.txt" },
        { "title": "No Savior", "artist": "Weight of Silence", "src": "musicas/No Savior.mp3", "lrc": "musicas/No Savior.txt" },
        { "title": "The Glass Prison", "artist": "Weight of Silence", "src": "musicas/The Glass Prison.mp3", "lrc": "musicas/The Glass Prison.txt" },
        { "title": "The Cathedral of Trees", "artist": "Weight of Silence", "src": "musicas/The Cathedral of Trees.mp3", "lrc": "musicas/The Cathedral of Trees.txt" }
    ];

    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('play');
    const titleEl = document.getElementById('title');
    const progress = document.getElementById('progress-bar');
    const progressContainer = document.getElementById('progress-container');
    const playlistUl = document.getElementById('playlist-ul');
    const lyricsPopup = document.getElementById('lyrics-popup');
    const lyricsText = document.getElementById('lyrics-text');

    let songIndex = 0;
    let isShuffle = false;

    function renderPlaylist() {
        playlistUl.innerHTML = "";
        songs.forEach((song, index) => {
            const li = document.createElement('li');
            li.className = `playlist-item ${index === songIndex ? 'active-song' : ''}`;
            li.innerHTML = `<div class="item-info"><span class="item-title">${song.title}</span><span class="item-artist">${song.artist}</span></div>`;
            li.onclick = () => { songIndex = index; loadSong(songs[songIndex]); playSong(); };
            playlistUl.appendChild(li);
        });
    }

    function loadSong(song) {
        titleEl.innerText = song.title;
        audio.src = encodeURI(song.src);
        fetchLyrics(song.lrc);
        renderPlaylist();
        
        // Update Media Session (Mobile controls)
        if ('mediaSession' in navigator) {
            navigator.mediaSession.metadata = new MediaMetadata({
                title: song.title,
                artist: 'Weight of Silence',
                album: 'Dead Creator',
                artwork: [{ src: 'musicas/album_cover.jpg', sizes: '512x512', type: 'image/jpeg' }]
            });
        }
    }

    async function fetchLyrics(path) {
        lyricsText.innerText = "Carregando letra...";
        try {
            const res = await fetch(path);
            const text = res.ok ? await res.text() : "Letra não encontrada.";
            lyricsText.innerText = text;
        } catch { lyricsText.innerText = "Erro ao carregar arquivo de letra."; }
    }

    function playSong() {
        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
        audio.play();
    }

    function pauseSong() {
        playBtn.innerHTML = '<i class="fas fa-play"></i>';
        audio.pause();
    }

    playBtn.addEventListener('click', () => audio.paused ? playSong() : pauseSong());

    document.getElementById('next').onclick = () => {
        if (isShuffle) {
            songIndex = Math.floor(Math.random() * songs.length);
        } else {
            songIndex = (songIndex + 1) % songs.length;
        }
        loadSong(songs[songIndex]); playSong();
    };

    document.getElementById('prev').onclick = () => {
        songIndex = (songIndex - 1 + songs.length) % songs.length;
        loadSong(songs[songIndex]); playSong();
    };

    document.getElementById('shuffle').onclick = function() {
        isShuffle = !isShuffle;
        this.style.color = isShuffle ? "var(--accent-color)" : "var(--text-secondary)";
    };

    audio.ontimeupdate = (e) => {
        const { duration, currentTime } = e.srcElement;
        if (duration) {
            progress.style.width = `${(currentTime / duration) * 100}%`;
            document.getElementById('current-time').innerText = formatTime(currentTime);
            document.getElementById('duration').innerText = formatTime(duration);
        }
    };

    progressContainer.onclick = (e) => {
        audio.currentTime = (e.offsetX / progressContainer.clientWidth) * audio.duration;
    };

    function formatTime(time) {
        const min = Math.floor(time / 60);
        const sec = Math.floor(time % 60);
        return `${min}:${sec < 10 ? '0' : ''}${sec}`;
    }

    document.getElementById('lyrics-btn').onclick = () => lyricsPopup.classList.add('show');
    document.getElementById('close-lyrics').onclick = () => lyricsPopup.classList.remove('show');
    audio.onended = () => document.getElementById('next').click();

    loadSong(songs[songIndex]);
</script>
</body>
</html>